---
title: React Redux 기본학습 -2
layout: post
date:  2020-11-26 18:18
image: /assets/images/post_header.jpg
headerImage: true
#projects: true
blog: true
tag:
- react
- node.js
- dev
- programming
category: tech-note
author: pie
description: React Redux 기본학습 -2
---

생활코딩의 React Redux 강좌를 보면서 학습한 내용 정리용.

[생활코딩 - React Redux](https://opentutorials.org/module/4518)

## Redux 종속성 제거

실습 화면은 Redux를 사용하지 않았던 것과 동일.
![0082-001.png](/assets/images/post/0082-001.png)

1. Add Number(number 라는 변수값이 갱신됨) 
2. Add Number Root(변화된 값을 Add Number에서 받아서 다시 Root로 보내고) 
3. Root (Root에 Add Number 에서부터 기어올라온 number 라는 변수를 겨우 받아서 state.number 를 갱신함)
4. Display Number Root (Root 에서 바뀐 state.number 값을 갱신하러 Display Number 로 내려감)
5. Display Number (Add Number 에서 갱신된 number값이 state.number에 담겨서 겨우 Display Number 로 내려와서 표시값이 갱신됨)

매우 길고 복잡하며 귀찮음......

#### /App.js
```js
import React, {Component} from 'react';
import './App.css';
import AddNumberRoot from "./components/AddNumberRoot";
import DisplayNumberRoot from "./components/DisplayNumberRoot";


/*
1. Redux 가 없을때 - props 로 아래와 같이 값을 넘겨 줘야 했었음.
<DisplayNumberRoot number={this.state.number}></DisplayNumberRoot>

2. Redux 가 있을때 - 
<DisplayNumberRoot></DisplayNumberRoot>
 */
class App extends Component {
  state = {number:0}
  render(){
    return (
      <div className="App">
        <h1>Root</h1>
        <AddNumberRoot onClick={function(size){
          this.setState({number:this.state.number + size})
        }.bind(this)}></AddNumberRoot>
        <DisplayNumberRoot></DisplayNumberRoot>
      </div>
    );
  }
}

export default App;
```

#### /components/AddNumberRoot.jsx
```js
import React, {Component} from 'react';
import AddNumber from "../components/AddNumber";

/*
1. Redux 가 없을 때 - props 로 onClick 이벤트 실행시켜서 보내주고 받고 쇼를 해야했음.
<AddNumber onClick={function(size){
              this.props.onClick(size);
          }.bind(this)}></AddNumber>
2. Redux 가 있을 때 

*/
export default class AddNumberRoot extends Component{
    render(){
      return (
        <div>
          <h1>Add Number Root</h1>
          <AddNumber></AddNumber>
        </div>
      );
    }
  }
```

#### /components/AddNumber.jsx
```js
import React, {Component} from 'react';
import store from '../store';

export default class AddNumber extends Component {
  state = {size:1}
    render() {
      return (
        <div>
          <h1>Add Number</h1>
          <input type="button" value="+" onClick={function(){
            store.dispatch({type:'INCREMENT', size:this.state.size});
          }.bind(this)}></input>
          <input type="text" value={this.state.size} onChange={function(e){
            this.setState({size:Number(e.target.value)});
          }.bind(this)}></input>
        </div>
      )
    }
  }
```
#### /components/DisplayNumberRoot.jsx
```js
import React, {Component} from "react";
import DisplayNumber from "../components/DisplayNumber";
/*
1. Redux 가 없을 때
<DisplayNumber number={this.props.number}></DisplayNumber>

2. Redux 가 있을 때
<DisplayNumber></DisplayNumber>

*/

export default class DisplayNumberRoot extends Component{
    render(){
      return (
        <div>
          <h1>Display Number Root</h1>
          <DisplayNumber></DisplayNumber>
        </div>
      )
    }
  } 
```

#### /components/DisplayNumber.jsx
```js
import React, {Component} from "react";
import store from "../store";

export default class DisplayNumber extends Component {
    state = {number:store.getState().number};

    // store 에 데이터 값이 바뀔 때 마다 새로 화면 그려주기 위해 
    // 생성자에 subscribe(구독=state 변경시에 인지해서 화면 다시 그려주는 놈) 설정.
    constructor(props){
        super(props);
        // store 에 데이터 값이 바뀌었을 때 본인을 다시 render 해라는 뜻.
        store.subscribe(function(){
            this.setState({number:store.getState().number});
        }.bind(this));
    }

    render() {
      return (
        <div>
          <h1>Display Number</h1>
          <input type="text" value={this.state.number} readOnly></input>
        </div>
      )
    }
  }

```

